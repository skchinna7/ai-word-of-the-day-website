<body class="dark">
    <div class="container">
        <div class="header">
            <a href="index.html" class="logo-container">
                <img src="images/logo.jpg" alt="Logo" class="logo-image">
                <div>
                    <div class="logo-text">Word of the Day</div>
                    <span class="logo-tagline">Expand your vocabulary daily</span>
                </div>
            </a>
            <div class="controls" id="headerControls">
                <a href="login.html" class="btn">üîê Login</a>
                <div class="theme-toggle" id="themeToggle"></div>
                <a href="about.html" class="btn">‚ÑπÔ∏è About</a>
            </div>
        </div>

        <!-- Stats Banner -->
        <div class="stats-banner">
            <div class="stat-box">
                <div class="stat-number" id="totalWords">...</div>
                <div class="stat-label">Total Words</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="totalViews">...</div>
                <div class="stat-label">Total Views</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="totalSubscribers">...</div>
                <div class="stat-label">Subscribers</div>
            </div>
        </div>

        <!-- Today's Word -->
        <div class="word-section">
            <div class="word-card">
                <div class="word" id="word">Loading...</div>
                <div class="phonetic" id="phonetic"></div>
                <div class="pronunciation" id="pronunciation"></div>
                <span class="part-of-speech-badge" id="partOfSpeech" style="display: none;"></span>
                <div class="stats" id="stats"></div>
            </div>
            
            <div class="meaning-card">
                <div class="meaning" id="meaning"></div>
                
                <div class="syn-ant-section" id="synonymsSection" style="display: none;">
                    <h3 class="syn-ant-title">üìó Synonyms</h3>
                    <div class="syn-ant-list" id="synonyms"></div>
                </div>
                
                <div class="syn-ant-section" id="antonymsSection" style="display: none;">
                    <h3 class="syn-ant-title">üìï Antonyms</h3>
                    <div class="syn-ant-list" id="antonyms"></div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>&copy; 2026 Word of the Day</p>
            <p id="timezoneInfo"></p>
        </div>
    </div>

    <!-- ONLY THESE SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
    console.log('üöÄ Starting...');

    const { createClient } = window.supabase;
    const sb = createClient(
        "https://qzatavslhtkioivemwlk.supabase.co",
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF6YXRhdnNsaHRraW9pdmVtd2xrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA1MzIyMTYsImV4cCI6MjA4NjEwODIxNn0.LaNyj8T6VYGMMbuyX-Fg_6Fm6yIhPLTW0enYd6sNdGE"
    );

    // Theme
    const theme = localStorage.getItem('theme') || 'dark';
    document.body.className = theme;
    const toggle = document.getElementById('themeToggle');
    if (theme === 'dark') toggle.classList.add('active');
    toggle.onclick = () => {
        const isDark = document.body.classList.contains('dark');
        document.body.className = isDark ? 'light' : 'dark';
        toggle.classList.toggle('active');
        localStorage.setItem('theme', isDark ? 'light' : 'dark');
    };

    // Stats
    async function loadStats() {
        console.log('üìä Stats...');
        
        const { data: w } = await sb.from('words').select('id, views');
        const { data: s } = await sb.from('subscribers').select('id');
        
        const wc = w ? w.length : 0;
        const vc = w ? w.reduce((sum, x) => sum + (x.views || 0), 0) : 0;
        const sc = s ? s.length : 0;
        
        console.log('Words:', wc, 'Views:', vc, 'Subs:', sc);
        
        document.getElementById('totalWords').textContent = wc;
        document.getElementById('totalViews').textContent = vc;
        document.getElementById('totalSubscribers').textContent = sc;
    }

    // Word
    async function loadWord() {
        console.log('üìù Word...');
        
        const today = new Date().toISOString().split('T')[0];
        let { data } = await sb.from('words').select('*').eq('scheduled_for', today).limit(1);
        
        if (!data || !data[0]) {
            const r = await sb.from('words').select('*').order('created_at', {ascending: false}).limit(1);
            data = r.data;
        }
        
        if (!data || !data[0]) {
            document.getElementById('word').textContent = 'No Words';
            document.getElementById('meaning').textContent = 'Add words in admin panel';
            return;
        }
        
        const word = data[0];
        console.log('Got word:', word.word);
        
        document.getElementById('word').textContent = word.word;
        document.getElementById('meaning').textContent = word.meaning;
        document.getElementById('phonetic').textContent = word.phonetic || '';
        document.getElementById('pronunciation').textContent = word.pronunciation || '';
        
        if (word.part_of_speech) {
            document.getElementById('partOfSpeech').textContent = word.part_of_speech;
            document.getElementById('partOfSpeech').style.display = 'inline-block';
        }
        
        if (word.synonyms && word.synonyms.length > 0) {
            document.getElementById('synonyms').innerHTML = word.synonyms.map(x => `<span class="syn-ant-tag">${x}</span>`).join('');
            document.getElementById('synonymsSection').style.display = 'block';
        }
        
        if (word.antonyms && word.antonyms.length > 0) {
            document.getElementById('antonyms').innerHTML = word.antonyms.map(x => `<span class="syn-ant-tag antonym">${x}</span>`).join('');
            document.getElementById('antonymsSection').style.display = 'block';
        }
        
        document.getElementById('stats').innerHTML = `<div class="stat-item">üëÅÔ∏è ${word.views || 0} views</div>`;
    }

    // TZ
    document.getElementById('timezoneInfo').textContent = 'üåç ' + Intl.DateTimeFormat().resolvedOptions().timeZone;

    // Run
    loadStats();
    loadWord();
    console.log('‚úÖ Done!');
    </script>
</body>
</html>